<?php 	$this->headscript()->appendFile($this->basePath() . '/js/index/index.js');?>
<div class="heading">
	<div class="text"><h1>Sensor Readings</h1></div>
	<div class="button"><span id="pumpOn" class="btn btn-primary">Turn Pump On</span></div>
</div>
<?php if ($this->sensors && $this->sensorValues) : ?>
<div class="sensorReadings">
<?php
	//output the latest sensor values
	$i = 0;
	foreach ($this->sensors as $sensor) {
		//open the row for every 4th element
		if ($i % 4 == 0) echo '<div>';
		//output the sensor details
		echo $this->partial('watering-system/partials/sensordisplay.phtml', array('sensor' => $sensor));
		//close the row for every 4th element
		if ($i % 4 == 3) echo '</div>';
		//we need this to clear the divs on small displays otherwise we can get misaligned rows
		if ($i % 4 == 1) echo '<div class="clearfix visible-xs"></div>';
		$i++;
	}
	//we need this line to close the last row if it wasn't 4 elements wide
	if ($i % 4 != 3) echo '</div>';
?>
</div>
<?php
	//output the graph 
	echo $this->partial('watering-system/partials/sensorgraph.phtml', array('sensorValues' => $this->sensorValues)); 
?>
<?php else : ?>
	<p>No sensor values found</p>
<?php endif; ?>