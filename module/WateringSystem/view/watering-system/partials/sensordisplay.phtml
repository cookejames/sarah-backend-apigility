<?php 
use WateringSystem\Entity\Sensor;
use WateringSystem\Entity\SensorValue;
$sensor = $this->sensor;
if ($sensor instanceof Sensor == false) return;
?>

<div class="sensorReading">
	<div class="title">
		<?php echo $this->escapehtml($this->sensor->getDescription()); ?>
	</div>
	<div class="value">
	<?php 
		$sensorValue = $this->sensorvalue($sensor);
		if ($sensorValue instanceof SensorValue) {
			echo $this->escapehtml($sensorValue->getCalibratedValue() . $sensor->getUnits());
		} else {
			echo '--';
		}
	?>
	</div>
	<div class="time">
		<small><?php echo $this->fuzzyDate($sensorValue->getDate());?></small>
	</div>
	<?php if ($sensor->getIsRanged()) : ?>
	<div class="progress progress-striped">
		<?php 
		$r = $sensor->getRange();
			$percent = (int) ($sensorValue->getCalibratedValue() / $sensor->getRange() * 100);
		?>
		<div class="progress-bar progress-bar-info" style="width: <?php echo $percent?>%"></div>
	</div>
	<?php endif; ?>
</div>